define("kg/react/0.0.2/lib/ReactDOMSelect",["./AutoFocusMixin","./LinkedValueUtils","./ReactBrowserComponentMixin","./ReactCompositeComponent","./ReactElement","./ReactDOM","./ReactUpdates","./Object.assign"],function(e,t,i){"use strict";function l(){this.isMounted()&&(this.setState({value:this._pendingValue}),this._pendingValue=0)}function n(e,t){if(null!=e[t])if(e.multiple){if(!Array.isArray(e[t]))return new Error("The `"+t+"` prop supplied to <select> must be an array if `multiple` is true.")}else if(Array.isArray(e[t]))return new Error("The `"+t+"` prop supplied to <select> must be a scalar value if `multiple` is false.")}function a(e,t){var i,l,n,a=e.props.multiple,s=null!=t?t:e.state.value,u=e.getDOMNode().options;if(a)for(i={},l=0,n=s.length;n>l;++l)i[""+s[l]]=!0;else i=""+s;for(l=0,n=u.length;n>l;l++){var o=a?i.hasOwnProperty(u[l].value):u[l].value===i;o!==u[l].selected&&(u[l].selected=o)}}var s=e("./AutoFocusMixin"),u=e("./LinkedValueUtils"),o=e("./ReactBrowserComponentMixin"),r=e("./ReactCompositeComponent"),p=e("./ReactElement"),c=e("./ReactDOM"),h=e("./ReactUpdates"),m=e("./Object.assign"),d=p.createFactory(c.select.type),f=r.createClass({displayName:"ReactDOMSelect",mixins:[s,u.Mixin,o],propTypes:{defaultValue:n,value:n},getInitialState:function(){return{value:this.props.defaultValue||(this.props.multiple?[]:"")}},componentWillMount:function(){this._pendingValue=null},componentWillReceiveProps:function(e){!this.props.multiple&&e.multiple?this.setState({value:[this.state.value]}):this.props.multiple&&!e.multiple&&this.setState({value:this.state.value[0]})},render:function(){var e=m({},this.props);return e.onChange=this._handleChange,e.value=null,d(e,this.props.children)},componentDidMount:function(){a(this,u.getValue(this))},componentDidUpdate:function(e){var t=u.getValue(this),i=!!e.multiple,l=!!this.props.multiple;(null!=t||i!==l)&&a(this,t)},_handleChange:function(e){var t,i=u.getOnChange(this);i&&(t=i.call(this,e));var n;if(this.props.multiple){n=[];for(var a=e.target.options,s=0,o=a.length;o>s;s++)a[s].selected&&n.push(a[s].value)}else n=e.target.value;return this._pendingValue=n,h.asap(l,this),t}});i.exports=f});